(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{a3a9:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-page",{attrs:{padding:""}},[r("q-list",[r("q-btn",{staticClass:"absolute back-btn shadow-1",attrs:{flat:"",round:"",padding:"lg",color:"dark",icon:"navigate_before"},on:{click:function(e){return t.$router.back()}}}),r("q-item-label",{staticClass:"text-center",attrs:{header:""}},[t._v(t._s(t.category.title))]),t._l(t.dishes,(function(e){return[r("dish-item",{attrs:{dish:e,"category-id":t.category.id}}),r("q-separator")]}))],2)],1)},n=[],s=(r("8e6e"),r("8a81"),r("ac6a"),r("cadf"),r("06db"),r("456d"),r("c47a")),i=r.n(s),c=r("2f62"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-item",{staticClass:"q-pr-sm",attrs:{clickable:""},on:{click:function(e){return t.showDish(t.dish)}}},[r("q-item-section",{staticClass:"q-ml-none",attrs:{top:"",thumbnail:""}},[r("img",{attrs:{src:t.dish.relative_image_path_list}})]),r("q-item-section",{attrs:{top:""}},[r("q-item-label",[t._v(t._s(t.dish.title))]),r("q-space"),r("q-item-label",{attrs:{caption:""}},[r("span",{staticClass:"text-subtitle2 text-black"},[t._v(t._s(t._f("price_format")(t.dish.price)))])])],1),r("q-item-section",{staticClass:"q-pl-sm",attrs:{side:""}},[r("q-space"),r("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[t.addingStatus?t._e():r("q-btn",{attrs:{label:"в корзину",outline:"",rounded:"",size:"sm",color:"primary",loading:t.addingToCart},on:{click:function(e){return e.stopPropagation(),t.addToCart()}}}),t.addingStatus&&"success"===t.addingStatus?r("q-btn",{attrs:{label:"ok",size:"sm",rounded:"",unelevated:"",color:"green-6",icon:"check"}}):t._e(),t.addingStatus&&"fail"===t.addingStatus?r("q-btn",{attrs:{label:"ошибка",rounded:"",unelevated:"",color:"orange-6",size:"sm"}}):t._e()],1)],1)],1)},d=[],u=r("967e"),l=r.n(u),p=(r("96cf"),r("fa84")),b=r.n(p);function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){i()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var g={name:"DishItem",props:{dish:{type:Object,required:!0},categoryId:{type:String,required:!0}},data:function(){return{addingToCart:!1,addingStatus:null,timer:null}},computed:f({},Object(c["c"])("dishes",{previousDish:"dish"})),watch:{addingStatus:"handleAddingStatusChange"},methods:f(f(f({},Object(c["b"])("cart",["addCartItem"])),Object(c["b"])("dishes",["getDish"])),{},{addToCart:function(){var t=this;return b()(l.a.mark((function e(){return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.addingToCart=!0,e.prev=1,e.next=4,t.addCartItem({quantity:1,dish_id:t.dish.id,category_id:t.categoryId});case 4:t.addingStatus="success",e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](1),console.log(e.t0),t.addingStatus="fail";case 11:return e.prev=11,t.addingToCart=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,7,11,14]])})))()},showDish:function(){var t=this;return b()(l.a.mark((function e(){return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.previousDish.id||t.previousDish.id!==t.dish.id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.getDish(t.dish.id);case 4:return e.next=6,t.$router.push({path:"dishes/".concat(t.dish.id)});case 6:case"end":return e.stop()}}),e)})))()},handleAddingStatusChange:function(t,e){var r=this;t&&(this.timer=setTimeout((function(){return r.addingStatus=null}),2e3))}}),beforeDestroy:function(){clearTimeout(this.timer)}},m=g,O=r("2877"),v=r("eebe"),y=r.n(v),j=r("66e5"),w=r("4074"),q=r("0170"),_=r("2c91"),S=r("9c40"),D=Object(O["a"])(m,o,d,!1,null,"05f88a31",null),k=D.exports;function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(Object(r),!0).forEach((function(e){i()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}y()(D,"components",{QItem:j["a"],QItemSection:w["a"],QItemLabel:q["a"],QSpace:_["a"],QBtn:S["a"]});var x={name:"Dishes",components:{DishItem:k},computed:C(C({},Object(c["c"])("dishes",["dishes"])),Object(c["c"])("categories",["category"]))},I=x,Q=r("9989"),T=r("1c1c"),E=r("eb85"),$=Object(O["a"])(I,a,n,!1,null,null,null);e["default"]=$.exports;y()($,"components",{QPage:Q["a"],QList:T["a"],QBtn:S["a"],QItemLabel:q["a"],QSeparator:E["a"]})}}]);