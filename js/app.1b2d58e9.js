(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{0:function(e,t,r){e.exports=r("2f39")},"0047":function(e,t,r){},"2f39":function(e,t,r){"use strict";r.r(t);var n=r("967e"),a=r.n(n),s=(r("a481"),r("96cf"),r("fa84")),o=r.n(s),c=(r("7d6e"),r("e54f"),r("4848"),r("c382"),r("985d"),r("0047"),r("2b0e")),i=r("14c0"),u=r("42d2"),p=r("b05d"),l=r("f508"),d=r("436b"),f=r("18d6"),h=r("2a19");c["a"].use(p["a"],{config:{},lang:i["a"],iconSet:u["a"],plugins:{Loading:l["a"],Dialog:d["a"],LocalStorage:f["a"],Notify:h["a"]}});var m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"q-app"}},[r("router-view")],1)},g=[],v=(r("8e6e"),r("8a81"),r("ac6a"),r("cadf"),r("06db"),r("456d"),r("c47a")),b=r.n(v),w=r("2f62"),k=(r("6762"),r("2fdb"),r("551c"),r("bc3a")),x=r.n(k),y=r("4cfa"),O="https://35.198.142.220/",j=x.a.create({baseURL:O,headers:{common:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}});j.interceptors.response.use((function(e){return e}),(function(e){return!e.response||401!==e.response.status&&400!==e.response.status?e.response&&403===e.response.status?Object(y["a"])("Доступ запрещен"):e.response&&422===e.response.status?K.commit("setValidationErrors",e.response.data.errors):!e.response||500!==e.response.status&&503!==e.response.status?e.response&&Object(y["a"])(e.response.data.error||"Неизвестная ошибка"):Object(y["a"])("Ошибка сервера. Обратитесь в Тех.поддержку."):Object(y["a"])(e.response.data.message),Promise.reject(e)}));var C=f["a"].getItem("token");C&&(j.defaults.headers.common["Authorization"]="Bearer "+C),c["a"].prototype.$axios=j;var P={categories:[],category:{}},E={setCategories:function(e,t){e.categories=t},setCategory:function(e,t){e.category=t}},S={categories:function(e){return e.categories},category:function(e){return e.category}},_={getCategories:function(e){return o()(a.a.mark((function t(){var r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,e.dispatch,l["a"].show(),t.prev=2,t.next=5,j.get("mobile/categories");case 5:n=t.sent,r("setCategories",n.data),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),Object(y["a"])("Ошибка получения категорий");case 12:return t.prev=12,l["a"].hide(),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,9,12,15]])})))()},setCategory:function(e,t){var r=e.commit;r("setCategory",t)}},D={namespaced:!0,getters:S,mutations:E,actions:_,state:P},I={dishes:[],dish:{}},A={setDishes:function(e,t){e.dishes=t},setDish:function(e,t){e.dish=t}},U={dishes:function(e){return e.dishes},dish:function(e){return e.dish}},L={setDishes:function(e,t){var r=e.commit;r("setDishes",t)},getDishes:function(e,t){return o()(a.a.mark((function r(){var n,s;return a.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.dispatch,l["a"].show(),r.prev=2,r.next=5,j.get("mobile/dishes",{params:t});case 5:s=r.sent,n("setDishes",s.data),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](2),Object(y["a"])("Ошибка получения блюд");case 12:return r.prev=12,l["a"].hide(),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[2,9,12,15]])})))()},getDish:function(e,t){return o()(a.a.mark((function r(){var n,s;return a.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,l["a"].show(),r.prev=2,r.next=5,j.get("mobile/dishes/".concat(t));case 5:s=r.sent,n("setDish",s.data),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](2),Object(y["a"])("Ошибка получения блюд");case 12:return r.prev=12,l["a"].hide(),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[2,9,12,15]])})))()}},F={namespaced:!0,getters:U,mutations:A,actions:L,state:I},V=(r("7514"),r("f751"),{token:f["a"].getItem("token"),user:{}}),z={setToken:function(e,t){e.token=t},setUser:function(e,t){Object.assign(e.user,t)}},$={registerUser:function(e,t){var r=this;return o()(a.a.mark((function n(){var s,o,c;return a.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,o=e.dispatch,n.prev=1,n.next=4,j.post("api/register",t);case 4:c=n.sent,s("setToken",c.data.token),f["a"].set("token",c.data.token),!j.defaults.headers.common["Authorization"]&&c.data.token&&(j.defaults.headers.common["Authorization"]="".concat(c.data.token_type," ").concat(c.data.token)),o("getUser"),o("cart/getCart",null,{root:!0}),r.$router.push("/"),n.next=16;break;case 13:n.prev=13,n.t0=n["catch"](1),n.t0.response||Object(y["a"])(n.t0.message);case 16:case"end":return n.stop()}}),n,null,[[1,13]])})))()},loginUser:function(e,t){var r=this;return o()(a.a.mark((function n(){var s,o,c;return a.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,o=e.dispatch,n.prev=1,n.next=4,j.post("api/login",t);case 4:c=n.sent,s("setToken",c.data.token),f["a"].set("token",c.data.token),!j.defaults.headers.common["Authorization"]&&c.data.token&&(j.defaults.headers.common["Authorization"]="".concat(c.data.token_type," ").concat(c.data.token)),o("getUser"),o("cart/getCart",null,{root:!0}),r.$router.push("/"),n.next=16;break;case 13:n.prev=13,n.t0=n["catch"](1),n.t0.response||Object(y["a"])(n.t0.message);case 16:case"end":return n.stop()}}),n,null,[[1,13]])})))()},logoutUser:function(e){var t=this;return o()(a.a.mark((function r(){var n;return a.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,j.post("api/logout");case 4:f["a"].remove("token"),n("setToken",null),n("setUser",{}),n("clearCart",{},{root:!0}),delete j.defaults.headers.common["Authorization"],t.$router.push("/auth"),r.next=15;break;case 12:r.prev=12,r.t0=r["catch"](1),r.t0.response||Object(y["a"])(r.t0.message);case 15:case"end":return r.stop()}}),r,null,[[1,12]])})))()},getUser:function(e){return o()(a.a.mark((function t(){var r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,j.get("mobile/user");case 4:n=t.sent,r("setUser",n.data),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),t.t0.response||Object(y["a"])(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()}},q={isLoggedIn:function(e){return!!e.token},user:function(e){return e.user},user_main_phone:function(e){return e.user&&0!==e.user.phones.length?e.user.phones.find((function(e){return!!e.is_main})):null}},R={namespaced:!0,state:V,mutations:z,actions:$,getters:q},T=(r("20d6"),{cart:{cart_items:[],sets:[],preorder_date:null},addingStatus:null}),B={setCart:function(e,t){e.cart=Object.assign({},t)},clearCart:function(e){e.cart=Object.assign({},{cart_items:[],sets:[],preorder_date:null})},setAddingStatus:function(e,t){e.addingStatus=t},updateCartItems:function(e,t){var r=e.cart.cart_items.findIndex((function(e){return e.id===t.id}));r<0||e.cart.cart_items.splice(r,1,t)},updateCart:function(e,t){Object.assign(e.cart,t)}},N={cart:function(e){return e.cart},addingStatus:function(e){return e.addingStatus},cartStandaloneItems:function(e){return e.cart.cart_items},sets:function(e){return e.cart.sets}},J={getCart:function(e){return o()(a.a.mark((function t(){var r,n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,j.get("mobile/cart");case 4:n=t.sent,r("setCart",n.data),t.next=11;break;case 8:throw t.prev=8,t.t0=t["catch"](1),t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},addCartItem:function(e,t){return o()(a.a.mark((function r(){var n,s;return a.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,j.post("mobile/cart_items",t);case 4:s=r.sent,n("setCart",s.data),n("setAddingStatus","success"),r.next=13;break;case 9:throw r.prev=9,r.t0=r["catch"](1),n("setAddingStatus","fail"),r.t0;case 13:case"end":return r.stop()}}),r,null,[[1,9]])})))()},setAddingStatus:function(e,t){var r=e.commit;r("setAddingStatus",t)},clearCart:function(e){var t=e.commit;t("clearCart")},updateQuantity:function(e,t){return o()(a.a.mark((function r(){var n,s;return a.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,j.put("mobile/cart_items/".concat(t.id),t);case 4:s=r.sent,n("updateCart",s.data),r.next=12;break;case 8:throw r.prev=8,r.t0=r["catch"](1),console.log("Не удалось изменить количество блюда в корзине"),r.t0;case 12:case"end":return r.stop()}}),r,null,[[1,8]])})))()},deleteItem:function(e,t){return o()(a.a.mark((function r(){var n,s;return a.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,j.delete("mobile/cart_items/".concat(t));case 4:s=r.sent,n("updateCart",s.data),r.next=12;break;case 8:throw r.prev=8,r.t0=r["catch"](1),console.log("Не удалось удалить блюдо из корзины"),r.t0;case 12:case"end":return r.stop()}}),r,null,[[1,8]])})))()},checkout:function(e,t){return o()(a.a.mark((function r(){var n;return a.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.commit,console.log("checkout..."),r.prev=2,r.next=5,j.post("mobile/orders",t);case 5:return n=r.sent,r.abrupt("return",n.data);case 9:throw r.prev=9,r.t0=r["catch"](2),r.t0.response&&![400,401,422,500,503].includes(r.t0.response.status)&&(Object(y["a"])("Ошибка создания заказа",r.t0.response.data.message),console.error(r.t0)),r.t0;case 13:case"end":return r.stop()}}),r,null,[[2,9]])})))()},getStreetSuggestions:function(e,t){return o()(a.a.mark((function r(){var n;return a.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.commit,r.prev=1,r.next=4,j.get("api/suggestions",{params:t});case 4:return n=r.sent,r.abrupt("return",n.data);case 8:throw r.prev=8,r.t0=r["catch"](1),console.error("Не удалось найти улицу соответствующую введенным символам."),r.t0;case 12:case"end":return r.stop()}}),r,null,[[1,8]])})))()},getDeliveryCost:function(e,t){return o()(a.a.mark((function r(){var n;return a.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.commit,r.prev=1,r.next=4,j.get("api/get_delivery_cost",{params:t});case 4:return n=r.sent,r.abrupt("return",n.data);case 8:throw r.prev=8,r.t0=r["catch"](1),r.t0;case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()},createSet:function(e,t){return o()(a.a.mark((function r(){var n,s,o;return a.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s={items:t},r.prev=2,r.next=5,j.post("mobile/sets",s);case 5:o=r.sent,n("updateCart",o.data),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](2),console.error(r.t0);case 12:case"end":return r.stop()}}),r,null,[[2,9]])})))()}},Q={namespaced:!0,getters:N,mutations:B,actions:J,state:T},X={set:{}},H={setSet:function(e,t){e.set=t}},M={setSet:function(e,t){var r=e.commit;r("setSet",t)}},W={set:function(e){return e.set}},G={namespaced:!0,getters:W,mutations:H,actions:M,state:X};c["a"].use(w["a"]);var K=new w["a"].Store({modules:{categories:D,dishes:F,auth:R,cart:Q,sets:G},state:{errors:[]},mutations:{setErrors:function(e,t){e.errors=t},clearErrors:function(e){e.errors=[]},setValidationErrors:function(e,t){Object.keys(t).forEach((function(r){t[r].forEach((function(t){e.errors.includes(t)||e.errors.push(t)}))}))}},getters:{errors:function(e){return e.errors},hasErrors:function(e){return!!e.errors.length}},actions:{setErrors:function(e,t){var r=e.commit;r("setErrors",t)},setValidationErrors:function(e,t){var r=e.commit;r("setValidationErrors",t)},clearErrors:function(e){var t=e.commit;t("clearErrors")}},strict:!1});function Y(){var e=K.getters.errors.reduce((function(e){return"- ".concat(e,"<br>")}));h["a"].create({icon:null,color:"red-2",textColor:"red-8",message:"<div>".concat(e,"</div>"),html:!0,position:"center",caption:"Устраните вышеуказанные ошибки",timeout:6e4,actions:[{icon:"close",color:"red-8",handler:function(){K.commit("clearErrors")}}]})}function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){b()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var te={name:"App",computed:ee(ee({},Object(w["c"])("auth",["isLoggedIn"])),Object(w["c"])(["hasErrors"])),methods:ee(ee({},Object(w["b"])("auth",["getUser"])),Object(w["b"])("cart",["getCart"])),watch:{hasErrors:function(e){console.log("watch validation has errors",e),e&&Y()}},mounted:function(){this.isLoggedIn&&(this.getUser(),this.getCart())}},re=te,ne=r("2877"),ae=Object(ne["a"])(re,m,g,!1,null,null,null),se=ae.exports,oe=r("8c4f"),ce=function(e,t,r){K.getters["auth/isLoggedIn"]?r("/"):r()},ie=function(e,t,r){K.getters["auth/isLoggedIn"]?r():r("/auth")},ue=[{path:"/",component:function(){return Promise.all([r.e(0),r.e(7)]).then(r.bind(null,"713b"))},beforeEnter:ie,children:[{path:"",component:function(){return Promise.all([r.e(0),r.e(12)]).then(r.bind(null,"8b24"))}},{path:"categories",component:function(){return Promise.all([r.e(0),r.e(9)]).then(r.bind(null,"c5d2"))}},{path:"dishes",component:function(){return Promise.all([r.e(0),r.e(11)]).then(r.bind(null,"a3a9"))}},{path:"dishes/:id",component:function(){return Promise.all([r.e(0),r.e(10)]).then(r.bind(null,"8431"))},props:!0},{path:"account",component:function(){return Promise.all([r.e(0),r.e(8)]).then(r.bind(null,"8c2d"))}},{path:"cart",component:function(){return Promise.all([r.e(0),r.e(3)]).then(r.bind(null,"f68e"))}},{path:"sets",component:function(){return Promise.all([r.e(0),r.e(14)]).then(r.bind(null,"2e5e"))}},{path:"sets/:id",component:function(){return Promise.all([r.e(0),r.e(13)]).then(r.bind(null,"2e25"))},props:!0}]},{path:"/auth",component:function(){return Promise.all([r.e(0),r.e(6)]).then(r.bind(null,"5f5f"))},beforeEnter:ce,children:[{path:"",component:function(){return Promise.all([r.e(0),r.e(4)]).then(r.bind(null,"21f3"))}}]}];ue.push({path:"*",component:function(){return Promise.all([r.e(0),r.e(5)]).then(r.bind(null,"e51e"))}});var pe=ue;c["a"].use(oe["a"]),c["a"].filter("decimal_format",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return e?new Intl.NumberFormat("ru",{style:"decimal",minimumFractionDigits:t,maximumFractionDigits:r}).format(parseFloat(e)):e})),c["a"].filter("price_format",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return void 0===e||null===e||""===e?null:new Intl.NumberFormat("ru",{style:"currency",currency:"RUB",currencyDisplay:"symbol",maximumFractionDigits:2,minimumFractionDigits:t}).format(parseFloat(e))}));var le=new oe["a"]({scrollBehavior:function(){return{x:0,y:0}},routes:pe,mode:"hash",base:""}),de=function(){return fe.apply(this,arguments)};function fe(){return fe=o()(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof K){e.next=6;break}return e.next=3,K({Vue:c["a"]});case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=K;case 7:if(t=e.t0,"function"!==typeof le){e.next=14;break}return e.next=11,le({Vue:c["a"],store:t});case 11:e.t1=e.sent,e.next=15;break;case 14:e.t1=le;case 15:return r=e.t1,t.$router=r,n={router:r,store:t,render:function(e){return e(se)}},n.el="#q-app",e.abrupt("return",{app:n,store:t,router:r});case 20:case"end":return e.stop()}}),e)}))),fe.apply(this,arguments)}function he(){return me.apply(this,arguments)}function me(){return me=o()(a.a.mark((function e(){var t,r,n,s,o,i,u,p,l;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,de();case 2:t=e.sent,r=t.app,n=t.store,s=t.router,o=!0,i=function(e){o=!1,window.location.href=e},u=window.location.href.replace(window.location.origin,""),p=[void 0],l=0;case 11:if(!(!0===o&&l<p.length)){e.next=29;break}if("function"===typeof p[l]){e.next=14;break}return e.abrupt("continue",26);case 14:return e.prev=14,e.next=17,p[l]({app:r,router:s,store:n,Vue:c["a"],ssrContext:null,redirect:i,urlPath:u});case 17:e.next=26;break;case 19:if(e.prev=19,e.t0=e["catch"](14),!e.t0||!e.t0.url){e.next=24;break}return window.location.href=e.t0.url,e.abrupt("return");case 24:return console.error("[Quasar] boot error:",e.t0),e.abrupt("return");case 26:l++,e.next=11;break;case 29:if(!1!==o){e.next=31;break}return e.abrupt("return");case 31:new c["a"](r);case 32:case"end":return e.stop()}}),e,null,[[14,19]])}))),me.apply(this,arguments)}he()},"4cfa":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("2a19");function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n["a"].create({type:"negative",color:"red-7",message:e,position:"center",caption:t,timeout:1e4,actions:[{icon:"close",color:"white"}]})}}},[[0,2,0]]]);